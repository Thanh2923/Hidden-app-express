<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Cập Nhật Sản Phẩm</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
</head>
<body>

<div class="container mt-5">
    <h1>Cập Nhật Sản Phẩm</h1>
    
    <form action="/admin/update?_method=PUT" method="post"  enctype="multipart/form-data">
        <input type="hidden" name="id" value="<%= products.id %>">
        <!-- Tên sản phẩm -->
        <div class="mb-3">
            <label for="name" class="form-label">Tên Sản Phẩm</label>
            <input type="text" class="form-control" id="name" name="name" value="<%= products.name %>" required>
        </div>

        <!-- Giá -->
        <div class="mb-3">
            <label for="price" class="form-label">Giá</label>
            <input type="number" class="form-control" id="price" name="price" value="<%= products.price %>" required>
        </div>

        <!-- Mô tả -->
        <div class="mb-3">
            <label for="description" class="form-label">Mô Tả</label>
            <textarea class="form-control" id="description" name="description" required><%= products.description %></textarea>
        </div>

        <!-- Hình ảnh -->
        <div class="mb-3">
            <label for="image" class="form-label">Hình Ảnh</label>
            <img style="width: 150px; height: 100px;" src="/images/<%=products.image %>" alt>
            <input type="file" name="image"
                class="form-control">
        </div>

        <!-- Nút Cập Nhật -->
        <button type="submit" class="btn btn-primary">Cập Nhật</button>
    </form>
</div>

<!-- <script>
    const formUpdatePro = document.getElementById('formUpdatePro');
    formUpdatePro.addEventListener('submit', async (event) => {
        event.preventDefault();
        const name = document.getElementById('name').value;
        const price = document.getElementById('price').value;
        const description = document.getElementById('description').value;
        const image = document.getElementById('image').value;
        const data = {
            name: name,
            price: price,
            description: description,
            image: image
        };
        console.log(data)

        try {
        const response = await fetch(`http://localhost:3000/product/product/${productId}`, {
            method: 'PUT',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({data})
        });

        if (response.ok) {
            alert('Cập nhật sản phẩm thành công!');
            window.location.href = '/admin'; // Quay lại trang danh sách sản phẩm
        } else {
            alert('Có lỗi xảy ra khi cập nhật sản phẩm.');
        }
    } catch (error) {
        alert('Có lỗi xảy ra.');
    }
    })
// async function updateProduct(event, productId) {
//     event.preventDefault(); // Ngăn form gửi mặc định
//     const form = event.target;

//     const formData = {
//         name: form.name.value,
//         price: form.price.value,
//         description: form.description.value,
//         image: form.image.value,
//     };

//     try {
//         const response = await fetch(`http://localhost:3000/product/product/${productId}`, {
//             method: 'PUT',
//             headers: {
//                 'Content-Type': 'application/json'
//             },
//             body: JSON.stringify(formData)
//         });

//         if (response.ok) {
//             alert('Cập nhật sản phẩm thành công!');
//             window.location.href = '/admin'; // Quay lại trang danh sách sản phẩm
//         } else {
//             alert('Có lỗi xảy ra khi cập nhật sản phẩm.');
//         }
//     } catch (error) {
//         alert('Có lỗi xảy ra.');
//     }
// }
</script> -->

</body>
</html>
